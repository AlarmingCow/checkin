<head>
    <title>checkin</title>
</head>

<body>
{{> main}}
</body>

<template name="main">
    <div class="row">
        <div class="span12">
            <ul class="thumbnails">
                {{#each teams}}
                <li class="span3">
                    <div class="thumbnail">
                        {{> teamHeader}}
                        {{> teamLatest}}
                    </div>
                </li>
                {{/each}}
            </ul>
        </div>
    </div>
    {{#if showDays}}
    {{#each days}}
    {{> day}}
    {{/each}}
    {{/if}}

    <div class="show-days-option">
        {{#if showDays}}
        <a id="show-days-no">Show less</a>
        {{else}}
        <a id="show-days-yes">Show more</a>
        {{/if}}
    </div>
</template>

<template name="teamHeader">
    <span class="label">{{dateString}}</span>
    {{#unless edit}}
    <a class="add-checkin">
        <button class="btn btn-mini"><i class="icon-pencil"></i></button>
    </a>
    {{/unless}}
    <h3>{{name}}</h3>
</template>

<template name="day">
    <div class="row">
        <div class="span12">
            <h4>{{ displayString }}</h4>
            <ul class="thumbnails">
                {{#each teamDays}}
                {{> teamDay}}
                {{/each}}
            </ul>
        </div>
    </div>
</template>

<template name="teamDay">
    <li class="span3">
        <div class="thumbnail">
            {{team.name}}
            {{#each checkins}}
            {{#markdown}}{{description}}{{/markdown}}
            {{/each}}
        </div>
    </li>
</template>

<template name="teamLatest">
    <div class="checkin">
        {{#if edit}}
        <div>
            <textarea id="text" cols="30" rows="5"/>
        </div>
        <div class="preview">
            {{#markdown}}{{preview}}{{/markdown}}
        </div>
        <div>
            <button class="btn btn-primary btn-small" id="save-new-checkin">Add</button>
            <button class="btn btn-small" id="cancel-new-checkin">Cancel</button>
        </div>
        {{else}}
        {{#markdown}}{{checkin.description}}{{/markdown}}
        {{/if}}
    </div>
</template>
