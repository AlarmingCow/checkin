<head>
  <title>checkin</title>
</head>

<body>
  {{> main}}
</body>

<template name="main">
  <table class="outer">
    <thead>
      <tr class="day-row">
        <td></td>
        {{#each teams}}
	<td class="team-name">{{name}}</td>
        {{/each}}
      </tr>
    </thead>

    <tr class"latest-row">
      <td class="day-label">
	Latest
      </td>
      {{#each teams}}
        {{> teamLatest}}
      {{/each}}
    </tr>

    {{#each days}}
      {{> day}}
    {{/each}}
  </table>

  <div>
    <div>Insert a checkin:</div>
    <div>
      <select id="team">
	{{#each teams}}
	  <option value="{{_id}}">{{name}}</option>
        {{/each}}
      </select>
    </div>
    <div>
      <span>
	<textarea id="text" cols="50" rows="5"/>
     </span>
     <span>
       {{#markdown}}{{preview}}{{/markdown}}
     </span>
    </div>
    <div>
      <input type="button" id="add-new-checkin" value="Add"/>
    </div>
  </div>
</template>

<template name="day">
  <tr class="day-row">
    <td class="day-label">
      {{ displayString }}
    </td>
    {{#each teamDays }}
	{{> teamDay}}
    {{/each}}
  </tr>
</template>

<template name="teamDay">
  <td class="team-day">
    {{#each checkins}}
    <div class="checkin">
      {{#markdown}}{{description}}{{/markdown}}
      </div>
    {{/each}}
  </td>
</template>

<template name="teamLatest">
  <td class="team-day">
    <div class="checkin">
      {{#markdown}}{{checkin.description}}{{/markdown}}
    </div>
  </td>
</template>
